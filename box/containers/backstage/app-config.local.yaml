# ==============================================================================
# Backstage Local Configuration (for make run / yarn dev)
# ==============================================================================
# Uses SQLite for local container testing without GitLab integration
# Run with: yarn dev (which loads both app-config.yaml and app-config.local.yaml)
# ==============================================================================

app:
  title: Backstage (Local)
  baseUrl: http://localhost:3000
  # Override GitLab config from main config
  gitlab:
    host: localhost

backend:
  baseUrl: http://localhost:7007
  listen:
    port: 7007
  cors:
    origin: http://localhost:3000
  database:
    client: better-sqlite3
    connection: ':memory:'
  auth:
    dangerouslyDisableDefaultAuthPolicy: true

# Disable GitLab integration for local testing
integrations:
  gitlab: []

# Catalog configuration for local testing (no GitLab discovery)
catalog:
  import:
    entityFilename: catalog-info.yaml
  rules:
    - allow: [Component, System, API, Resource, Location, Domain, Group, User, Template]
  # Override GitLab providers with disabled versions
  providers:
    gitlab: null
    gitlabOrg: null
  locations:
    - type: file
      target: ../../templates/register-component/template.yaml
      rules:
        - allow: [Template]

# Auth for local testing
auth:
  environment: development
  providers:
    guest:
      dangerouslyAllowOutsideDevelopment: true
